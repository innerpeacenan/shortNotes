(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LogIn"],{"268c":function(t,e,s){},"3edd":function(t,e,s){"use strict";var n=s("268c"),o=s.n(n);o.a},7904:function(t,e,s){"use strict";var n=s("d747"),o=s.n(n);o.a},"9ddf":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[t._m(0),s("div",{attrs:{clas:"row"}},[s("form",{staticClass:"form-horizontal col-sm-6",attrs:{id:"loginForm",method:"post"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-2 control-label"},[t._v("用户: ")]),s("div",{staticClass:"col-sm-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{id:"username",name:"name",autocomplete:"off",autofocus:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("span",[t._v(t._s(t.errorMsg["name"]))])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-2 control-label"},[t._v("密码: ")]),s("div",{staticClass:"col-sm-10"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control",attrs:{id:"passwd",name:"passwd",autocomplete:"off",type:"password"},domProps:{value:t.passwd},on:{input:function(e){e.target.composing||(t.passwd=e.target.value)}}}),s("span",[t._v(t._s(t.errorMsg["passwd"]))])])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"col-sm-offset-2 col-sm-10"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.doLogin()}}},[t._v("登录")]),s("button",{staticClass:"btn btn-default pull-right",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.logout()}}},[t._v("登出")])])])])])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6"},[s("h1",{staticClass:"text-center"},[t._v("make life easier")])])])}],i=(s("7f7f"),s("cadf"),s("551c"),s("097d"),{name:"LogIn",created:function(){this.logout()},data:function(){return{name:"",passwd:"",errorMsg:{name:"",passwd:""}}},methods:{doLogin:function(){var t=this,e=this.$store.state.urls.login,s={name:this.name,passwd:this.passwd};this.$http.post(e,s).then(function(e){var s=e.body.data;1!==e.body.status?(t.errorMsg.name=s.name,t.errorMsg.passwd=s.passwd):(t.name=s.name,t.passwd=s.passwd)},function(t){t.status})},logout:function(){var t=this.$store.state.urls.logout,e=t.description,s={};this.$http.post(t,s).then(function(t){1!==t.body.status&&window.window.console.error("".concat(e,"失败，原因: ").concat(t.body.msg))})}}}),a=i,r=(s("7904"),s("2877")),c=Object(r["a"])(a,n,o,!1,null,null,null);c.options.__file="LogIn.vue";e["default"]=c.exports},c502:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"ffz_app_backup_main"}},[s("div",{attrs:{title:"同时按下<CtrL>和<ENTER>,可隐藏或显示左侧导航栏",tabindex:"0"},on:{keydown:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?void t.toggleItemsTab():null}}},[s("div",{class:1===t.settings.seen_items?"col-lg-4":"hide"},[s("items-panel")],1),s("div",{class:1===t.settings.seen_items?"col-lg-8":"col-lg-12"},[s("keep-alive",[s("item-description")],1),s("keep-alive",[s("backup-notes-panel")],1)],1)])])},o=[],i=(s("cadf"),s("551c"),s("097d"),s("0a39")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel-heading"},[s("div",[s("ul",t._l(t.notes,function(e,n){return s("li",{key:n,attrs:{id:"note_"+e.id}},[s("span",{staticClass:"hidden-xs",attrs:{title:"创建时间"}},[t._v(t._s(e.c_time))]),s("span",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.item_id,expression:"note.item_id"}],staticClass:"items",attrs:{title:"选择其他目录,则自动将笔记移动到其他目录下了"},on:{change:[function(s){var n=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"item_id",s.target.multiple?n:n[0])},function(s){t.mv(e,n)}]}},[e.item_id==t.item.id?t._l(t.items,function(e,n){return s("option",{key:n,attrs:{selected:""},domProps:{value:e.id}},[t._v(t._s(e.name))])}):t._l(t.items,function(e,n){return s("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]),s("div",{staticClass:"pull-right action-buttons"},[s("span",{on:{click:function(s){s.stopPropagation(),t.todo(e,n)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isChecked,expression:"note.isChecked"}],attrs:{type:"checkbox",title:"标记完成"},domProps:{checked:Array.isArray(e.isChecked)?t._i(e.isChecked,null)>-1:e.isChecked},on:{change:function(s){var n=e.isChecked,o=s.target,i=!!o.checked;if(Array.isArray(n)){var a=null,r=t._i(n,a);o.checked?r<0&&t.$set(e,"isChecked",n.concat([a])):r>-1&&t.$set(e,"isChecked",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(e,"isChecked",i)}}})]),s("span",{on:{click:function(e){e.stopPropagation(),t.add()}}},[s("a",{staticClass:"glyphicon glyphicon-plus-sign",attrs:{title:"添加笔记"}})]),t._v("\n                     \n                    "),s("span",{on:{click:function(s){s.stopPropagation(),t.edit(e,s)}}},[s("a",{staticClass:"glyphicon glyphicon-edit",attrs:{title:"编辑笔记"}})]),t._v("\n                     \n                    "),s("span",{on:{click:function(s){s.stopPropagation(),t.save(e)}}},[s("a",{staticClass:"glyphicon glyphicon-saved",attrs:{title:"保存笔记"}})]),t._v("\n                      \n                    "),s("span",{on:{click:function(t){t.stopPropagation()},dblclick:function(e){t.del(n)}}},[s("a",{staticClass:"glyphicon glyphicon-trash",attrs:{title:"双击删除笔记"}})])]),s("div",[e.seen?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.modifiedContent,expression:"note.modifiedContent"},{name:"focus",rawName:"v-focus"}],staticClass:"col-xs-12",domProps:{value:e.modifiedContent},on:{keydown:function(s){return("button"in s||83===s.keyCode)&&s.ctrlKey?(s.preventDefault(),void t.save(e,1)):null},keyup:[function(s){if(!("button"in s)&&t._k(s.keyCode,"esc",27,s.key,["Esc","Escape"]))return null;t.save(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.h(e)}],focus:function(s){t.h(s,e)},paste:function(s){t.image(s,e)},input:function(s){s.target.composing||t.$set(e,"modifiedContent",s.target.value)}}}):t._e(),e.seen&&void 0!==e.pictures&&e.pictures.length>0?s("table",{staticClass:"table"},[s("thead"),s("tbody",t._l(e.pictures,function(t,e){return s("tr",{key:e},[s("td",[s("img",{attrs:{src:t}})])])}),0)]):t._e(),e.seen?t._e():s("div",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}],staticClass:"textarea",domProps:{innerHTML:t._s(e.md)},on:{dblclick:function(s){s.stopPropagation(),t.edit(e)}}})])])}),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"text-center more",on:{click:function(e){e.stopPropagation(),t.more()}}},[t._v("更多")])])])},r=[],c=s("a745"),l=s.n(c),u=(s("ac6a"),s("0e54")),d=s.n(u),f=s("1487"),p=s.n(f),m=(s("2c43"),{name:"BackupNotesPanel",directives:{focus:{inserted:function(t){t.focus()}},highlightjs:{inserted:function(t){var e=t.querySelectorAll("pre code");Array.prototype.forEach.call(e,p.a.highlightBlock)},update:function(t,e,s,n){if(s.data.domProps.innerHTML!==n.data.domProps.innerHTML){var o=t.querySelectorAll("pre code");Array.prototype.forEach.call(o,p.a.highlightBlock)}}}},data:function(){return{settings:{textarea_default_height:50},constant:{status:{enable:{code:10,desc:"有效且已保存"},disable:{code:20,desc:"未保存"}}},notes:[],item:{},items:[]}},created:function(){var t=this,e=this.$store.state;e.eventBus.$off(e.events.shouldGetNotes),e.eventBus.$on(e.events.shouldGetNotes,function(s){window.console.log(e.events.shouldGetNotes),t.doGetNotes(s)}),e.eventBus.$off(e.events.itemsChange),e.eventBus.$on(e.events.itemsChange,function(s){window.console.log(e.events.itemsChange,s),t.items=s}),e.eventBus.$off(e.events.itemDelete),e.eventBus.$on(e.events.itemDelete,function(s){window.console.log(e.events.itemDelete,"item",s,"this.item",t.item),s===t.item&&(t.notes=[])})},computed:{showMore:function(){return this.item?this.item.limit:0}},methods:{now:function(){var t=new Date,e=t.getMonth()+1,s=t.getDate(),n=t.getFullYear(),o=t.getHours(),i=t.getMinutes(),a=t.getSeconds();return n+"-"+e+"-"+s+"-"+o+":"+i+":"+a},newNote:function(){var t="undefined"===typeof this.item?0:this.item.id;return{id:0,item_id:t,content:"",c_time:this.now(),seen:!1,modifiedContent:"",pictures:[]}},doGetNotes:function(t,e){var s=this;if("undefined"!==typeof t){var n=this.$store.state.urls.getBackupNotes,o={params:{item_id:t.id,offset:t.offset,limit:t.limit}};this.$http.get(n,o).then(function(n){if(1!==n.body.status)   ;else{var o=n.body.data;if(l()(o)&&o.length<t.limit&&(t.limit=0),0===o.length){if(!t.id)return!1;o="append"===e?[]:[s.newNote()]}else o=o.map(function(t){return t.md=d()(t.content),t.seen=!1,t});t.notes="append"===e?t.notes.concat(o):o,t.offset=t.notes.length}}).then(function(){s.item=t,s.notes=t.notes})}else window.console.log("item is undefined",t)},add:function(){if("undefined"==typeof this.item||!this.item.id)return!1;var t=this.newNote();return this.notes.unshift(t),!0},image:function(t,e){if(t.clipboardData||t.originalEvent){var s=t.clipboardData||t.originalEvent.clipboardData;if(s.items){for(var n=s.items,o=n.length,i=null,a=0;a<o;a++)-1!==n[a].type.indexOf("image")&&(i=n[a].getAsFile());if(i){var r=t.target,c=this.$store.state.urls.image,l=new FormData;l.append("img",i),this.$http.post(c,l,{headers:{"Content-Type":"multipart/form-data"}}).then(function(s){if(1!==s.body.status)   ;else{var n=s.body.data;e.modifiedContent=t.target.value=r.value.substr(0,r.selectionStart+1)+"![]("+n.url+")"+r.value.substr(r.selectionStart),e.pictures=[n.url]}})}}}},h:function(t){var e=t.target,s=e.style.height,n=s.substring(0,s.length-2);n<e.scrollHeight&&(e.style.height=t.target.scrollHeight+this.settings.textarea_default_height+"px")},edit:function(t){t.modifiedContent=t.content,t.seen=!0},save:function(t,e){var s=this;if(t.item_id){t.content=t.modifiedContent;var n=this.$store.state.urls.saveNote,o={id:t.id,item_id:t.item_id,content:t.content};this.$http.post(n,o).then(function(n){if(1!==n.body.status)   ;else{var o=n.body.data;0==t.id&&(t.id=o.id),t.md=d()(t.content)}e||(t.seen=!1),s.item.offset=s.notes.length})}},del:function(t){var e=this,s=this.$store.state.urls.deleteNote,n={body:{id:this.notes[t].id}};this.$http.delete(s,n).then(function(s){1!==s.body.status||(e.notes.splice(t,1),e.item.offset=e.notes.length)})},mv:function(t,e){var s=this,n=this.$store.state.urls.moveNote,o={id:t.id,itemId:t.item_id};this.$http.put(n,o).then(function(t){1!==t.body.status||(s.notes.splice(e,1),s.item.offset=s.notes.length)})},more:function(){if(this.item){var t=this.$store.state;t.eventBus.$emit(t.events.itemUpdateLimitAndOffset,this.item),this.doGetNotes(this.item,"append")}},todo:function(t,e){var s=this,n=this.$store.state.urls.noteTodo,o={note_id:t.id};this.$http.put(n,o).then(function(t){1!==t.body.status||(s.notes.splice(e,1),s.item.offset=s.notes.length)})}}}),h=m,v=(s("3edd"),s("2877")),g=Object(v["a"])(h,a,r,!1,null,"cd87735a",null);g.options.__file="BackupNotesPanel.vue";var w=g.exports,b=s("9013"),C={name:"BackupNotes",data:function(){return{settings:{seen_items:1}}},components:{ItemDescription:b["a"],ItemsPanel:i["a"],BackupNotesPanel:w},methods:{toggleItemsTab:function(){window.console.log("toggleItemsTab trigger"),this.settings.seen_items=1==this.settings.seen_items?0:1}}},k=C,_=Object(v["a"])(k,n,o,!1,null,null,null);_.options.__file="BackupNotes.vue";e["default"]=_.exports},d747:function(t,e,s){}}]);
//# sourceMappingURL=LogIn.734c9b4f.js.map